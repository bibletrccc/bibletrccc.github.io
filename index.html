<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" crossorigin="use-credentials" href="manifest.json">
    <link rel="shortcut icon" href="images/bible.ico" type="image/x-icon">
    <link rel="icon" href="images/bible.ico" type="image/x-icon">
    <link rel="icon" type="image/png" href="images/bible16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="images/bible32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="images/bible96.png" sizes="96x96">    
    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="圣经中文版">
    <link rel="apple-touch-icon" sizes="192x192" href="images/bible192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="images/bible512.png">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <title>My Bible in Chinese</title>
  </head>
  <body>
	<div class="container" style="width:500px">
		<h1>My Bible in Chinese</h1>
		<h1>中文版圣经</h1>
	
		<div>
		<ol class="list-group list-group-numbered">
			<li class="list-group-item"><a href="01/1047.htm">创世记</a></li>
			<li class="list-group-item"><a href="02/1098.htm">出埃及记</a></li>
			<li class="list-group-item"><a href="03/1139.htm">利未记</a></li>
		</ol>
		</div>
	</div>
	<script>
		var _registerServiceWorker = function(){
			if (!navigator.serviceWorker) return;
			
			navigator.serviceWorker.register('sw.js').then(function(reg) {
			   if(!navigator.serviceWorker.controller) return;

			   if (reg.waiting) {
				 _updateReady(reg.waiting);
				 return;
			   }

			   if (reg.installing) {
				 _trackInstalling(reg.installing);
				 return;
			   }

			   reg.addEventListener('updatefound', function() {
				 _trackInstalling(reg.installing);
			   });
			 });
		   
			 var refreshing;
			 navigator.serviceWorker.addEventListener('controllerchange', function(){
				 if(refreshing) return;
				 window.location.reload();
				 refreshing = true;
			 });
	   };
	   var _trackInstalling = function(worker) {
		   worker.addEventListener('statechange', function(){
			   if(worker.state == 'installed') {
				   _updateReady(worker);
			   }
		   });
	   };
	   var _updateReady = function(worker){
		   //new version available
		   worker.postMessage({action: 'skipWaiting'});
	   };
	_registerServiceWorker();
	</script>
  </body>
</html>